from flask import Flask, request, render_template_string
import os

app = Flask(__name__)

texts = [
    "ChatGPT یک مدل هوش مصنوعی است.",
    "پایتون یک زبان برنامه‌نویسی ساده و قدرتمند است.",
    "گوگل یکی از معروف‌ترین موتورهای جستجو است.",
    "هوش مصنوعی در حال تغییر جهان است.",
    "برنامه‌نویسی مهارتی حیاتی در قرن ۲۱ است."
]

html_template = """ 
<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>موتور جستجوی من</title>
<style>
body { font-family: sans-serif; text-align: center; margin-top: 100px; background: #fafafa; }
input[type=text] { width: 60%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; }
button { padding: 10px 20px; border-radius: 10px; background: #4285f4; color: white; border: none; cursor: pointer; }
div.result { margin-top: 30px; width: 60%; margin-left: auto; margin-right: auto; text-align: left; }
</style>
</head>
<body>
<h1>🔍 موتور جستجوی من</h1>
<form method="GET">
<input type="text" name="q" placeholder="دنبال چی می‌گردی؟" value="{{query}}">
<button type="submit">جستجو</button>
</form>
<div class="result">
{% for r in results %}
<p>🔹 {{r}}</p>
{% endfor %}
{% if not results and query %}
<p>❌ نتیجه‌ای پیدا نشد.</p>
{% endif %}
</div>
</body>
</html>
"""

@app.route("/", methods=["GET"])
def home():
    query = request.args.get("q", "")
    results = [t for t in texts if query.lower() in t.lower()] if query else []
    return render_template_string(html_template, results=results, query=query)

if __name__ == "__main__":
    port = int(os.environ.get("PORT", 5000))
    app.run(host="0.0.0.0", port=port)